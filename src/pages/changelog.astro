---
import MainLayout from '../layouts/MainLayout.astro';

const changelog = [
  {
    version: "2.4.0",
    date: "Feb 18, 2026",
    title: "News Slider Update",
    desc: "Maintenance release focusing on performance and attribution standards.",
    changes: {
      "Improvements": [
        "Updated author URI to marxist.com in plugin header.",
        "Added support for WEBP image formats in slide background."
      ],
      "Fixes": [
        "Fixed carousel responsiveness on mobile viewport < 375px."
      ]
    }
  },
  {
    version: "2.1.0",
    date: "Feb 10, 2026",
    title: "Lenin Theme Polish",
    desc: "Refinement of typographic scales and core color tokens.",
    changes: {
      "Improvements": [
        "Refined H1-H6 typography scaling in theme.json.",
        "Added 'Brand Accent' (#fef6f5) to color palette."
      ],
      "Fixes": [
        "Fixed navigation menu z-index issue on overlay."
      ]
    }
  },
  {
    version: "1.0.0",
    date: "Jan 12, 2026",
    title: "Preheader Launch",
    desc: "Initial launch of the preheader logic engine.",
    changes: {
      "New Features": [
        "Implemented Priority Tree logic: Manual > Hub > Category.",
        "Added meta fields for custom label and custom URL."
      ]
    }
  }
];
---

<MainLayout title="Changelog">
  <div class="max-w-[1000px] pt-4 mx-auto">
    <!-- Header Actions -->
    <div class="flex justify-end gap-3 mb-10">
        <a href="/docs/01-getting-started" class="inline-flex items-center px-4 py-2 border border-[#DADCE0] rounded-full text-[14px] font-medium text-[#3C4043] hover:bg-[#F8F9FA] transition-colors">
            View docs
        </a>
        <a href="https://marxist.com" target="_blank" class="inline-flex items-center px-4 py-2 border border-[#DADCE0] rounded-full text-[14px] font-medium text-[#3C4043] hover:bg-[#F8F9FA] transition-colors">
            Visit Marxist.com
        </a>
    </div>

    <h1 class="text-[56px] font-medium tracking-tight text-[#202124] mb-4 leading-[1.1]">RCI Developer Hub<br>Changelog</h1>
    
    <!-- WIP Banner -->
    <div class="bg-[#E8F0FE] text-[#1967D2] px-6 py-3 flex items-center rounded-lg text-[13px] font-medium tracking-wide mb-16">
        <span class="material-symbols-outlined text-[18px] mr-2" style="font-variation-settings: 'FILL' 1;">info</span>
        <span>The RCI Developer Hub is the central resource for all Revolutionary Communist International digital tools and standards.</span>
    </div>

    
    <!-- Table Headers (Visual only) -->
    <div class="grid grid-cols-1 md:grid-cols-[200px_1fr] gap-8 mb-6 border-b border-[#F1F3F4] pb-2">
        <div class="text-[14px] font-bold text-[#202124]">Version</div>
        <div class="text-[14px] font-bold text-[#202124]">Description</div>
    </div>

    <div class="space-y-6">
      {changelog.map((entry) => (
        <div class="grid grid-cols-1 md:grid-cols-[200px_1fr] gap-8 items-start py-8 border-b border-[#F1F3F4] last:border-0">
          
          <!-- Left Column: Version & Date -->
          <div>
            <div class="text-[14px] font-medium text-[#202124] mb-1">{entry.version}</div>
            <div class="text-[14px] text-[#5F6368]">{entry.date}</div>
          </div>

          <!-- Right Column: Content -->
          <div class="w-full bg-[#F8F9FA] rounded-[24px] p-8">
            <h2 class="text-[20px] font-medium text-[#202124] mb-2">{entry.title}</h2>
            <p class="text-[14px] text-[#5F6368] mb-8 max-w-[600px]">{entry.desc}</p>
            
            <div class="space-y-0">
              {Object.entries(entry.changes).map(([type, items]) => (
                <div class="border-t border-[#E0E0E0] first:border-0">
                  <details class="group open:bg-transparent transition-colors -mx-4 px-4 rounded-lg" open>
                    <summary class="flex items-center justify-between py-4 cursor-pointer list-none text-[14px] font-medium text-[#202124] hover:text-black transition-colors">
                      <span>{type} <span class="text-[#5F6368] font-normal">({items.length})</span></span>
                      <span class="material-symbols-outlined text-[20px] text-[#5F6368] transition-transform group-open:rotate-180">expand_more</span>
                    </summary>
                    <div class="pb-4">
                      <ul class="space-y-2">
                        {items.map(item => (
                          <li class="flex items-start gap-3 text-[14px] text-[#3C4043]">
                             <span class="mt-2 w-1 h-1 rounded-full bg-[#3C4043] flex-shrink-0"></span>
                             <span class="leading-relaxed">{item}</span>
                          </li>
                        ))}
                      </ul>
                    </div>
                  </details>
                </div>
              ))}
            </div>

          </div>
        </div>
      ))}
    </div>
  </div>
</MainLayout>
